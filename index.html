<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geuther - Kindermöbel aus Tradition</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="all.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <style>
        /* Navigation Styles */
        .floating-nav {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            z-index: 1000;
        }

        .nav-toggle {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: var(--geuther-primary);
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            transition: all 0.3s ease;
        }

        .nav-toggle:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.2);
        }

        .nav-menu {
            position: absolute;
            bottom: calc(100% + 1rem);
            right: 0;
            background: white;
            border-radius: 12px;
            padding: 1rem;
            width: 280px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            transform: translateY(20px);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .nav-menu.active {
            transform: translateY(0);
            opacity: 1;
            visibility: visible;
        }

        .nav-menu::after {
            content: '';
            position: absolute;
            bottom: -8px;
            right: 24px;
            width: 16px;
            height: 16px;
            background: white;
            transform: rotate(45deg);
            box-shadow: 4px 4px 8px rgba(0,0,0,0.1);
        }

        .nav-menu ul {
            list-style: none;
            padding: 0;
            margin: 0;
            max-height: calc(100vh - 200px);
            overflow-y: auto;
        }

        .nav-menu li {
            margin-bottom: 0.5rem;
        }

        .nav-menu a {
            display: flex;
            align-items: center;
            padding: 0.75rem 1rem;
            color: var(--geuther-text);
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.2s ease;
            font-size: 0.95rem;
        }

        .nav-menu a:hover {
            background: var(--geuther-accent);
            color: var(--geuther-primary);
        }

        .nav-menu i {
            margin-right: 0.75rem;
            font-size: 1.1rem;
            color: var(--geuther-primary);
        }

        /* Loading Indicator */
        .loading {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--geuther-secondary);
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.3s ease;
            z-index: 1001;
        }

        .loading.active {
            transform: scaleX(1);
        }

        /* Content Area */
        #content {
            min-height: 100vh;
            opacity: 1;
            transition: opacity 0.3s ease;
        }

        #content.loading {
            opacity: 0.7;
        }

        /* Error Message */
        .error-message {
            position: fixed;
            top: 1rem;
            left: 50%;
            transform: translateX(-50%);
            background: #ff4444;
            color: white;
            padding: 1rem 2rem;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1002;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .error-message.active {
            opacity: 1;
            visibility: visible;
        }

        /* Newsletter Styles */
        .geuther-newsletter {
            background: linear-gradient(135deg, #C5D6CD 0%, #A7BFB4 100%);
            padding: 4rem 0;
            margin: 0;
            position: relative;
            overflow: hidden;
        }

        .geuther-newsletter .container {
            position: relative;
            z-index: 2;
        }

        .geuther-newsletter h2 {
            color: #42584A;
            font-size: 2rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .geuther-newsletter p {
            color: #42584A;
            margin-bottom: 2rem;
            max-width: 800px;
        }

        .geuther-newsletter .newsletter-form {
            max-width: 400px;
            margin: 0 auto;
        }

        .geuther-newsletter .form-control {
            border: none;
            border-radius: 4px;
            padding: 1rem;
            margin-bottom: 1rem;
            background: white;
        }

        .geuther-newsletter .btn-newsletter {
            width: 100%;
            padding: 1rem;
            background-color: #8B7355;
            border: none;
            border-radius: 4px;
            color: white;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .geuther-newsletter .btn-newsletter:hover {
            background-color: #6B5842;
            transform: translateY(-2px);
        }

        .geuther-newsletter .newsletter-features {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2rem;
            margin-top: 3rem;
        }

        .geuther-newsletter .feature-card {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .geuther-newsletter .feature-card:hover {
            transform: translateY(-5px);
        }

        .geuther-newsletter .feature-icon {
            font-size: 2rem;
            color: #42584A;
            margin-bottom: 1rem;
        }

        .geuther-newsletter .feature-title {
            color: #42584A;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        @media (max-width: 768px) {
            .geuther-newsletter .newsletter-features {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .geuther-newsletter {
                padding: 3rem 0;
            }

            .geuther-newsletter h2 {
                font-size: 1.5rem;
            }
        }

        /* Vorher-Nachher Slider Styles */
        .comparison-slider-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: white;
            z-index: 999;
            display: none;
        }

        .comparison-slider {
            position: relative;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        .comparison-before,
        .comparison-after {
            position: absolute;
            top: 0;
            height: 100%;
            overflow: hidden;
        }

        .comparison-before {
            left: 0;
            width: 50%;
        }

        .comparison-after {
            right: 0;
            width: 50%;
        }

        .comparison-handle {
            position: absolute;
            top: 0;
            left: 50%;
            width: 4px;
            height: 100%;
            background: var(--geuther-primary);
            cursor: ew-resize;
            transform: translateX(-50%);
            transition: background-color 0.3s ease;
        }

        .comparison-handle::before,
        .comparison-handle::after {
            content: '';
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 24px;
            height: 24px;
            background: var(--geuther-primary);
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .comparison-handle::before {
            top: 50%;
            transform: translate(-50%, -50%);
        }

        .comparison-handle::after {
            bottom: 50%;
            transform: translate(-50%, 50%);
        }

        .comparison-handle:hover,
        .comparison-handle.dragging {
            background: var(--geuther-secondary);
        }

        .comparison-handle:hover::before,
        .comparison-handle:hover::after,
        .comparison-handle.dragging::before,
        .comparison-handle.dragging::after {
            transform: translate(-50%, -50%) scale(1.2);
            background: var(--geuther-secondary);
        }

        .nav-menu .comparison-toggle {
            display: flex;
            align-items: center;
            padding: 0.75rem 1rem;
            color: var(--geuther-text);
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.2s ease;
            font-size: 0.95rem;
        }

        .nav-menu .comparison-toggle:hover {
            background: var(--geuther-accent);
            color: var(--geuther-primary);
        }

        .nav-menu .comparison-toggle.active {
            background: var(--geuther-accent);
            color: var(--geuther-primary);
        }

        .nav-menu .comparison-toggle i {
            margin-right: 0.75rem;
            font-size: 1.1rem;
            color: var(--geuther-primary);
        }

        @media (max-width: 768px) {
            .comparison-handle::before,
            .comparison-handle::after {
                width: 20px;
                height: 20px;
            }
        }

        /* Product Info Section */
        .product-info {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .product-header {
            border-bottom: 1px solid var(--geuther-border);
            padding-bottom: 0.25rem;
            margin-bottom: 0;
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .manufacturer-badge {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0;
            padding: 0.5rem;
            background: var(--geuther-accent);
            border-radius: 8px;
            width: fit-content;
        }

        .product-id {
            font-size: 0.9rem;
            color: var(--geuther-text);
            opacity: 0.6;
            margin: 0;
            white-space: nowrap;
        }

        .product-title {
            font-size: 2rem;
            font-weight: 600;
            color: var(--geuther-primary);
            margin: 0.25rem 0;
        }

        .product-rating {
            display: inline-flex !important;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .rating-stars {
            color: #FFD700;
            font-size: 1.1rem;
            letter-spacing: -1px;
            line-height: 1;
            display: inline-block;
        }

        .rating-count {
            font-size: 0.9rem;
            color: var(--geuther-text);
            opacity: 0.7;
            padding-left: 0.5rem;
            text-decoration: none;
            white-space: nowrap;
            display: inline-block;
        }

        .rating-count:hover {
            text-decoration: underline;
            color: var(--geuther-primary);
        }

        /* Price Section */
        .price-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0;
        }

        .price-main {
            display: flex;
            align-items: baseline;
            gap: 0.5rem;
            font-size: 2rem;
            font-weight: 600;
            color: var(--geuther-primary);
        }

        .price-tax {
            font-size: 0.9rem;
            opacity: 0.7;
            white-space: nowrap;
        }

        .delivery-time {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.85rem;
        }

        .delivery-time i {
            color: var(--geuther-primary);
            font-size: 1rem;
        }

        /* Key Features */
        .key-features {
            display: grid;
            gap: 0.25rem;
            margin: 0;
        }

        .key-feature {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1rem;
            color: var(--geuther-primary);
        }

        .key-feature i {
            font-size: 1.25rem;
            color: var(--geuther-primary);
            flex-shrink: 0;
        }

        /* Trust Elements */
        .trust-elements {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.5rem;
            margin: 0.5rem 0;
        }

        .trust-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem;
            background: var(--geuther-accent);
            border-radius: 8px;
        }

        .trust-item i {
            font-size: 1.25rem;
            color: var(--geuther-primary);
        }

        .trust-text {
            font-size: 0.85rem;
            line-height: 1.3;
        }

        .trust-text strong {
            display: block;
            font-weight: 600;
            font-size: 0.9rem;
        }

        /* Price Section */
        .product-price-section {
            background: var(--geuther-accent);
            padding: 0.75rem;
            border-radius: 12px;
            margin: 0.25rem 0;
        }

        .price-shipping {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #2da73c;
            background: rgba(45, 167, 60, 0.08);
            padding: 0.4rem 0.75rem;
            border-radius: 6px;
            border: 1px solid rgba(45, 167, 60, 0.2);
        }

        .price-shipping i {
            font-size: 1.1rem;
            color: #2da73c;
        }

        .shipping-text {
            display: flex;
            flex-direction: column;
            font-size: 0.85rem;
            line-height: 1.2;
            color: #2da73c;
        }

        .shipping-text strong {
            color: #2da73c;
        }

        .availability-section {
            display: flex;
            flex-direction: row;
            align-items: center;
            gap: 1rem;
            margin-top: 0.5rem;
            padding-top: 0.5rem;
            border-top: 1px solid var(--geuther-border);
        }

        .stock-status, .delivery-time {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.85rem;
        }

        .stock-status {
            color: #2da73c;
            font-weight: 500;
        }

        .stock-status i {
            color: #2da73c;
        }

        /* Manufacturer Badge */
        .manufacturer-badge img {
            height: 16px;
            width: auto;
        }

        .manufacturer-badge span {
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--geuther-primary);
        }

        /* Color Selection */
        .color-selection {
            margin: 0.5rem 0;
            display: grid;
            grid-template-columns: 1fr 3fr;
            align-items: center;
            gap: 2rem;
        }

        .color-label {
            margin: 0;
            font-weight: 500;
            white-space: nowrap;
        }

        .color-options {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .color-option {
            width: 48px;
            height: 48px;
            border-radius: 8px;
            cursor: pointer;
            border: 2px solid var(--geuther-border);
            transition: all 0.3s ease;
            position: relative;
        }

        .color-option:hover {
            transform: translateY(-2px);
        }

        .color-option.selected {
            border-color: var(--geuther-primary);
        }

        .color-option.selected::after {
            content: '';
            position: absolute;
            inset: -6px;
            border: 2px solid var(--geuther-primary);
            border-radius: 10px;
        }

        /* Add to Cart Section */
        .add-to-cart-section {
            display: flex;
            gap: 0.75rem;
            margin: 0.5rem 0;
        }

        .quantity-input {
            display: flex;
            align-items: center;
            border: 1px solid var(--geuther-border);
            border-radius: 8px;
            overflow: hidden;
        }

        .quantity-btn {
            width: 48px;
            height: 48px;
            border: none;
            background: var(--geuther-bg);
            cursor: pointer;
            font-size: 1.2rem;
            color: var(--geuther-primary);
            transition: all 0.3s ease;
        }

        .quantity-btn:hover {
            background: var(--geuther-accent);
        }

        .quantity-value {
            width: 64px;
            height: 48px;
            border: none;
            text-align: center;
            font-size: 1rem;
            font-weight: 500;
            border-left: 1px solid var(--geuther-border);
            border-right: 1px solid var(--geuther-border);
        }

        .add-to-cart-btn {
            flex: 1;
            height: 48px;
            background: var(--geuther-primary);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
        }

        .add-to-cart-btn:hover {
            background: #364b3d;
        }

        /* Product Gallery Styles */
        .geuther-product {
            font-family: 'Montserrat', sans-serif;
            color: var(--geuther-text);
            padding: 0;
        }

        .geuther-product .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        /* Hero Section */
        .product-hero {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            margin: 2rem 0 4rem;
            align-items: start;
        }

        .versandinfo {
            margin-left: 9rem;
        }

        /* Gallery Section */
        .product-gallery {
            position: sticky;
            top: 2rem;
        }

        .gallery-main {
            position: relative;
            width: 100%;
            aspect-ratio: 4/3;
            max-height: 500px;
            background: var(--geuther-bg);
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 1rem;
        }

        .gallery-main img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            padding: 2rem;
        }

        .gallery-thumbs {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 1rem;
        }

        .gallery-thumb {
            aspect-ratio: 1;
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .gallery-thumb:hover {
            transform: translateY(-2px);
        }

        .gallery-thumb.active {
            border-color: var(--geuther-primary);
        }

        .gallery-thumb img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            padding: 0.5rem;
        }

        @media (max-width: 992px) {
            .versandinfo {
                margin-left: 0rem;
            }
            .product-hero {
                grid-template-columns: 1fr;
                gap: 1rem;
                margin-top: 0;
            }

            .product-gallery {
                position: relative;
                top: 0;
            }

            .manufacturer-badge span {
                display: none;
            }

            .product-id {
                font-size: 0.85rem;
            }

            .availability-section {
                flex-direction: row;
                flex-wrap: nowrap;
                gap: 1rem;
            }

            .delivery-time {
                white-space: nowrap;
            }

            .delivery-time span:first-child {
                display: none;
            }

            .trust-elements {
                grid-template-columns: repeat(2, 1fr);
                gap: 0.75rem;
            }

            .trust-item {
                padding: 0.75rem;
            }

            .trust-item i {
                font-size: 1.1rem;
            }

            .trust-text {
                font-size: 0.85rem;
            }

            .color-selection {
                grid-template-columns: 1fr 1fr;
                gap: 0.5rem;
            }

            .color-label {
                font-size: 0.9rem;
            }

            .color-options {
                justify-content: flex-end;
            }
        }

        @media (max-width: 768px) {
            .gallery-thumbs {
                display: none;
            }

            .gallery-main {
                display: none;
            }

            .mobile-gallery {
                display: block;
                margin: 1rem 0;
                position: relative;
            }

            .gallery-nav {
                position: absolute;
                top: 50%;
                transform: translateY(-50%);
                width: 40px;
                height: 40px;
                background: rgba(255, 255, 255, 0.9);
                border: none;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                cursor: pointer;
                z-index: 2;
                box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            }

            .gallery-nav.prev {
                left: 10px;
            }

            .gallery-nav.next {
                right: 10px;
            }

            .product-title {
                font-size: 1.5rem;
            }

            .price-main {
                font-size: 1.5rem;
            }

            .availability-section {
                flex-direction: row;
                align-items: center;
                gap: 1rem;
            }

            .delivery-time span:first-child {
                display: none;
            }

            .delivery-time span:last-child {
                content: "In 2-3 Tagen bei dir";
            }
        }

        /* Product Grid Styles */
        .product-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .product-card {
            background: var(--geuther-bg);
            border: 1px solid var(--geuther-border);
            border-radius: 8px;
            overflow: visible;
            transition: all 0.3s ease;
            position: relative;
            z-index: 1;
        }

        .product-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transform: translateY(-5px);
            z-index: 2;
        }

        .product-image {
            position: relative;
            height: 200px;
            overflow: hidden;
            background: transparent;
            margin: 0.5rem;
            display: block;
            text-decoration: none;
        }

        .product-image img {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: auto;
            height: auto;
            max-width: 80%;
            max-height: 180px;
            object-fit: contain;
            transition: transform 0.3s ease;
        }

        .product-card:hover .product-image img {
            transform: translate(-50%, -50%) scale(1.05);
        }

        .product-info {
            padding: 1rem;
            position: relative;
        }

        .product-grid-title {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--geuther-primary);
        }

        .product-detail-title {
            font-size: 2rem;
            font-weight: 600;
            color: var(--geuther-primary);
            margin: 0.25rem 0;
        }

        .product-grid-description {
            font-size: 0.9rem;
            margin-bottom: 1rem;
            line-height: 1.4;
        }

        .product-price {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--geuther-primary);
        }

        .product-availability {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
            margin: 0.5rem 0;
            font-size: 0.85rem;
        }

        .availability-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #2da73c;
        }

        .delivery-time {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--geuther-text);
        }

        .product-features-hover {
            position: absolute;
            left: -1px;
            right: -1px;
            top: 100%;
            background: white;
            border: 1px solid var(--geuther-border);
            border-radius: 0 0 8px 8px;
            padding: 1rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            z-index: 3;
        }

        .product-card:hover .product-features-hover {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .product-feature {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 0.75rem;
            font-size: 0.9rem;
            line-height: 1.3;
        }

        .product-feature i {
            color: var(--geuther-primary);
            font-size: 0.8rem;
            margin-top: 0.2rem;
            flex-shrink: 0;
        }

        .product-feature:last-child {
            margin-bottom: 0;
        }

        .product-colors {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }

        .color-variant {
            width: 24px;
            height: 24px;
            border-radius: 4px;
            cursor: pointer;
            border: 1px solid var(--geuther-border);
            transition: all 0.2s ease;
            position: relative;
        }

        .color-variant:hover {
            transform: translateY(-2px);
        }

        .color-variant.white {
            background: #ffffff;
        }

        .color-variant.black {
            background: #2c2c2c;
        }

        .color-variant.natural {
            background: #d4bc9c;
        }

        .color-variant.more {
            background: var(--geuther-accent);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            color: var(--geuther-primary);
            font-weight: 600;
        }

        .color-variant.selected {
            border: 2px solid var(--geuther-primary);
        }

        .product-button {
            display: block;
            width: 100%;
            padding: 0.75rem;
            margin-top: 1rem;
            background: var(--geuther-primary);
            color: white;
            text-align: center;
            border: none;
            border-radius: 4px;
            font-weight: 500;
            text-decoration: none;
            transition: background-color 0.3s ease;
        }

        .product-button:hover {
            background: #364b3d;
        }

        @media (max-width: 1200px) {
            .product-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (max-width: 992px) {
            .product-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .product-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Sticky Bottom Bar */
        .sticky-bottom-bar {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--geuther-bg);
            padding: 1rem;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            z-index: 1000;
            transform: translateY(100%);
            transition: transform 0.3s ease;
        }

        .sticky-bottom-bar.visible {
            transform: translateY(0);
        }

        @media (max-width: 992px) {
            .sticky-bottom-bar {
                display: block; /* Standardmäßig sichtbar auf mobilen Geräten */
            }

            /* Verstecke die nicht-scrollenden Elemente in der mobilen Ansicht */
            .product-info .color-selection,
            .product-info .add-to-cart-section {
                display: none;
            }
            .product-info {
                padding: 0;
            }

            .product-content {
                margin-bottom: 120px;
            }
        }

        /* Mobile Gallery */
        .mobile-gallery {
            display: none;
            margin: 1rem 0;
            position: relative;
        }

        .gallery-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.9);
            border: none;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 2;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .gallery-nav.prev {
            left: 10px;
        }

        .gallery-nav.next {
            right: 10px;
        }

        @media (max-width: 768px) {
            .gallery-thumbs {
                display: none;
            }

            .gallery-main {
                display: none;
            }

            .mobile-gallery {
                display: block;
            }

            .product-title {
                font-size: 1.5rem;
            }

            .price-main {
                font-size: 1.5rem;
            }

            .availability-section {
                flex-direction: row;
                align-items: center;
                gap: 1rem;
            }

            .delivery-time span:first-child {
                display: none;
            }

            .delivery-time span:last-child {
                content: "In 2-3 Tagen bei dir";
            }
        }

        /* Blog Styles */
        .blog-tips {
            padding: 4rem 2rem;
            background-color: var(--light-bg);
        }

        .blog-tips h2 {
            text-align: center;
            margin-bottom: 3rem;
            color: var(--primary-color);
        }

        .blog-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .blog-card {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            text-decoration: none;
            color: inherit;
        }

        .blog-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        .blog-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .blog-content {
            padding: 1.5rem;
        }

        .blog-content h3 {
            margin: 0 0 1rem 0;
            color: var(--primary-color);
        }

        .blog-content p {
            margin: 0;
            color: var(--text-color);
            line-height: 1.6;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 1000;
        }

        .modal.active {
            display: block;
        }

        .modal .modal-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
        }

        .modal .modal-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90vw;
            max-width: 1000px;
            height: 80vh;
            background: #FFFFFF;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
        }

        .modal .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            width: 40px;
            height: 40px;
            border: none;
            background: #F5F1ED;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2;
            transition: all 0.3s ease;
        }

        .modal .modal-close:hover {
            background: #D4C4B7;
        }

        .modal .modal-container iframe {
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 12px;
        }

        @media (max-width: 768px) {
            .modal .modal-container {
                width: 100vw;
                height: 100vh;
                border-radius: 0;
            }

            .modal .modal-close {
                top: 1.5rem;
                right: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div id="content"></div>

    <div class="loading"></div>
    <div class="error-message"></div>

    <nav class="floating-nav">
        <button class="nav-toggle" aria-label="Navigation öffnen">
            <i class="bi bi-list"></i>
        </button>
        <div class="nav-menu">
            <ul>
                <li><a href="home.html"><i class="bi bi-house"></i>Startseite</a></li>
                <li><a href="kategorie.html"><i class="bi bi-grid"></i>Kategorien</a></li>
                <li><a href="detail.html"><i class="bi bi-box"></i>Produktdetail</a></li>
                <li><a href="sale.html"><i class="bi bi-tag"></i>Oster-Angebote</a></li>
                <li><a href="bundle.html"><i class="bi bi-box-seam"></i>Bundles</a></li>
                <li><a href="blog.html"><i class="bi bi-journal-text"></i>Blog</a></li>
                <li><a href="blogartikel.html"><i class="bi bi-book"></i>Blogartikel</a></li>
                <li><a href="ratgeber.html"><i class="bi bi-grid-3x3"></i>Türgitter Ratgeber</a></li>
                <li><a href="ersatzteile.html"><i class="bi bi-tools"></i>Ersatzteile</a></li>
                <li><a href="werte.html"><i class="bi bi-heart"></i>Unsere Werte</a></li>
                <li><a href="qualitaet.html"><i class="bi bi-shield-check"></i>Qualität</a></li>
                <li><a href="geschichte.html"><i class="bi bi-clock-history"></i>Geschichte</a></li>
                <li><a href="support.html"><i class="bi bi-headset"></i>Support</a></li>
                <li><a href="faq.html"><i class="bi bi-question-circle"></i>FAQ</a></li>
                <li><a href="versand.html"><i class="bi bi-truck"></i>Versand</a></li>
                <li><a href="haendler.html"><i class="bi bi-shop"></i>Händler</a></li>
                <li><a href="affiliate.html"><i class="bi bi-people"></i>Affiliate</a></li>
                <li><a href="widerruf.html"><i class="bi bi-arrow-return-left"></i>Widerruf</a></li>
                
            </ul>
        </div>
    </nav>

    <!-- Vorher-Nachher Slider -->
    <div class="comparison-slider-container" style="display: none;">
        <div class="comparison-slider">
            <div class="comparison-before">
                <img id="comparison-image" src="assets/images/home.png" alt="Alte Geuther Website" style="width: 100%; height: 100%; object-fit: cover;">
            </div>
            <div class="comparison-after">
                <div id="comparison-content"></div>
            </div>
            <div class="comparison-handle"></div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const content = document.getElementById('content');
            const comparisonContent = document.getElementById('comparison-content');
            const comparisonImage = document.getElementById('comparison-image');
            const loading = document.querySelector('.loading');
            const errorMessage = document.querySelector('.error-message');
            const navToggle = document.querySelector('.nav-toggle');
            const navMenu = document.querySelector('.nav-menu');
            const comparisonContainer = document.querySelector('.comparison-slider-container');
            const comparisonSlider = document.querySelector('.comparison-slider');
            const comparisonHandle = document.querySelector('.comparison-handle');
            const comparisonBefore = document.querySelector('.comparison-before');
            const comparisonAfter = document.querySelector('.comparison-after');

            // Mapping von Seiten zu Bildern
            const pageToImageMap = {
                'home.html': 'home.png',
                'kategorie.html': 'kategorie.png',
                'werte.html': 'werte.png',
                'qualitaet.html': 'qualitaet.png',
                'geschichte.html': 'geschichte.png',
                'haendler.html': 'haendler.png',
                'affiliate.html': 'affiliate.png',
                'support.html': 'support.png',
                'faq.html': 'faq.png',
                'versand.html': 'versand.png',
                'widerruf.html': 'widerruf.png',
                'detail.html': 'detail.png',
                'blogartikel.html': 'blogartikel.png',
                'sale.html': 'sale.png',
                'bundle.html': 'bundle.png',
                'ersatzteile.html': 'ersatzteile.png',
                'ratgeber.html': 'ratgeber.png',
            };

            let lastLoadedPage = 'home.html';
            let currentComparisonImage = null;
            let isComparisonActive = false;

            // Funktion zum Aktualisieren des Vergleichsbildes
            function updateComparisonImage(page) {
                if (!isComparisonActive) return;
                
                const imageName = pageToImageMap[page] || 'home.png';
                if (currentComparisonImage !== imageName) {
                    currentComparisonImage = imageName;
                    comparisonImage.src = `assets/images/${currentComparisonImage}`;
                }
            }

            // Vergleichs-Slider Toggle
            const comparisonToggle = document.createElement('li');
            comparisonToggle.innerHTML = `
                <a href="#" class="comparison-toggle">
                    <i class="bi bi-arrows-angle-contract"></i>
                    Vorher-Nachher Vergleich
                </a>
            `;
            navMenu.querySelector('ul').appendChild(comparisonToggle);

            comparisonToggle.querySelector('a').addEventListener('click', (e) => {
                e.preventDefault();
                if (comparisonContainer.style.display === 'none') {
                    isComparisonActive = true;
                    updateComparisonImage(lastLoadedPage);
                    comparisonContent.innerHTML = content.innerHTML;
                    comparisonContainer.style.display = 'block';
                } else {
                    isComparisonActive = false;
                    comparisonContainer.style.display = 'none';
                }
                
                comparisonToggle.querySelector('a').classList.toggle('active');
                navMenu.classList.remove('active');
            });

            // Slider Funktionalität
            let isDragging = false;
            let startX;
            let sliderLeft;

            comparisonHandle.addEventListener('mousedown', (e) => {
                isDragging = true;
                startX = e.clientX;
                sliderLeft = comparisonHandle.offsetLeft;
                comparisonHandle.classList.add('dragging');
            });

            document.addEventListener('mousemove', (e) => {
                if (!isDragging) return;

                const deltaX = e.clientX - startX;
                const newLeft = sliderLeft + deltaX;
                const maxLeft = comparisonSlider.offsetWidth;

                if (newLeft >= 0 && newLeft <= maxLeft) {
                    comparisonHandle.style.left = `${newLeft}px`;
                    comparisonBefore.style.width = `${newLeft}px`;
                    comparisonAfter.style.width = `${maxLeft - newLeft}px`;
                }
            });

            document.addEventListener('mouseup', () => {
                isDragging = false;
                comparisonHandle.classList.remove('dragging');
            });

            // Touch Events für mobile Geräte
            comparisonHandle.addEventListener('touchstart', (e) => {
                isDragging = true;
                startX = e.touches[0].clientX;
                sliderLeft = comparisonHandle.offsetLeft;
                comparisonHandle.classList.add('dragging');
            });

            document.addEventListener('touchmove', (e) => {
                if (!isDragging) return;

                const deltaX = e.touches[0].clientX - startX;
                const newLeft = sliderLeft + deltaX;
                const maxLeft = comparisonSlider.offsetWidth;

                if (newLeft >= 0 && newLeft <= maxLeft) {
                    comparisonHandle.style.left = `${newLeft}px`;
                    comparisonBefore.style.width = `${newLeft}px`;
                    comparisonAfter.style.width = `${maxLeft - newLeft}px`;
                }
            });

            document.addEventListener('touchend', () => {
                isDragging = false;
                comparisonHandle.classList.remove('dragging');
            });

            // Navigation Toggle
            navToggle.addEventListener('click', () => {
                navMenu.classList.toggle('active');
            });

            // Close menu when clicking outside
            document.addEventListener('click', (e) => {
                if (!navMenu.contains(e.target) && !navToggle.contains(e.target)) {
                    navMenu.classList.remove('active');
                }
            });

            // Function to extract and execute scripts
            function executeScripts(sourceDoc) {
                const scripts = sourceDoc.getElementsByTagName('script');
                Array.from(scripts).forEach(script => {
                    if (!script.src || !document.querySelector(`script[src="${script.src}"]`)) {
                        const newScript = document.createElement('script');
                        Array.from(script.attributes).forEach(attr => {
                            newScript.setAttribute(attr.name, attr.value);
                        });
                        newScript.textContent = script.textContent;
                        document.body.appendChild(newScript);
                    }
                });
            }

            // Function to initialize all interactive elements
            function initializeInteractiveElements() {
                // Initialize Bootstrap components
                if (typeof bootstrap !== 'undefined') {
                    // Initialize all dropdowns
                    document.querySelectorAll('.dropdown-toggle').forEach(dropdown => {
                        if (!bootstrap.Dropdown.getInstance(dropdown)) {
                            new bootstrap.Dropdown(dropdown);
                        }
                    });

                    // Initialize all tooltips
                    document.querySelectorAll('[data-bs-toggle="tooltip"]').forEach(tooltip => {
                        if (!bootstrap.Tooltip.getInstance(tooltip)) {
                            new bootstrap.Tooltip(tooltip);
                        }
                    });
                }

                // Initialize Product Finder
                const finderOptions = document.querySelectorAll('.finder-option');
                const nextButton = document.getElementById('nextStep');
                const prevButton = document.getElementById('prevStep');
                let currentStep = 1;

                if (finderOptions.length > 0 && nextButton && prevButton) {
                    // Initial button state
                    nextButton.disabled = true;

                    // Funktion zum Überprüfen der Auswahl
                    function checkSelection() {
                        const currentGroup = document.getElementById(`step${currentStep}`);
                        const hasSelection = currentGroup.querySelector('.finder-option.selected') !== null;
                        nextButton.disabled = !hasSelection;
                    }

                    // Produktserien-Daten
                    const productSeries = {
                        'Hochstuhl': [
                            { title: 'Swing', description: 'Der moderne Hochstuhl' },
                            { title: 'Family', description: 'Der klassische Hochstuhl' },
                            { title: 'Tamino', description: 'Der kompakte Hochstuhl' }
                        ],
                        'Sicherheitsgitter': [
                            { title: 'Easylock', description: 'Das klassische Türschutzgitter' },
                            { title: 'Vario Safe', description: 'Das flexible Schutzgitter' },
                            { title: 'Plus', description: 'Das erweiterte Schutzgitter' }
                        ],
                        'Laufgitter': [
                            { title: 'Octo-Park', description: 'Das achteckige Laufgitter' },
                            { title: 'Euro-Parc', description: 'Das variable Laufgitter' },
                            { title: 'Playpen', description: 'Das große Laufgitter' }
                        ],
                        'Kinderbett': [
                            { title: 'Safari', description: 'Das moderne Kinderbett' },
                            { title: 'Dream', description: 'Das klassische Kinderbett' },
                            { title: 'Cottage', description: 'Das gemütliche Kinderbett' }
                        ]
                    };

                    // Modell-Daten
                    const productModels = {
                        'Swing': [
                            { model: '2360', description: 'Swing Weiß/Natur' },
                            { model: '2361', description: 'Swing Buche/Natur' },
                            { model: '2362', description: 'Swing Grau/Weiß' }
                        ],
                        'Family': [
                            { model: '2510', description: 'Family Classic Buche' },
                            { model: '2511', description: 'Family Plus Weiß' },
                            { model: '2512', description: 'Family XL Natur' }
                        ],
                        'Tamino': [
                            { model: '2420', description: 'Tamino Basic Weiß' },
                            { model: '2421', description: 'Tamino Plus Buche' }
                        ],
                        'Easylock': [
                            { model: '4792', description: 'Easylock Wood 84.5-92.5 cm' },
                            { model: '4793', description: 'Easylock Metal 84.5-92.5 cm' }
                        ],
                        'Vario Safe': [
                            { model: '2785', description: 'Vario Safe 74-113 cm' },
                            { model: '2786', description: 'Vario Safe Plus 74-113 cm' }
                        ],
                        'Plus': [
                            { model: '2733', description: 'Plus Weiß 95-135 cm' },
                            { model: '2734', description: 'Plus Silber 95-135 cm' }
                        ],
                        'Octo-Park': [
                            { model: '2235', description: 'Octo-Park Classic Natur' },
                            { model: '2236', description: 'Octo-Park Plus Weiß' }
                        ],
                        'Euro-Parc': [
                            { model: '2244', description: 'Euro-Parc 97x97 cm Natur' },
                            { model: '2245', description: 'Euro-Parc 97x97 cm Weiß' }
                        ],
                        'Playpen': [
                            { model: '2256', description: 'Playpen XL 102x102 cm' },
                            { model: '2257', description: 'Playpen XXL 122x122 cm' }
                        ],
                        'Safari': [
                            { model: '1175', description: 'Safari 70x140 cm Weiß' },
                            { model: '1176', description: 'Safari 70x140 cm Natur' }
                        ],
                        'Dream': [
                            { model: '1162', description: 'Dream 70x140 cm Buche' },
                            { model: '1163', description: 'Dream 70x140 cm Weiß' }
                        ],
                        'Cottage': [
                            { model: '1185', description: 'Cottage 70x140 cm Weiß' },
                            { model: '1186', description: 'Cottage 70x140 cm Grau' }
                        ]
                    };

                    finderOptions.forEach(option => {
                        option.addEventListener('click', function() {
                            // Remove selected class from all options in the same group
                            const parentGroup = this.closest('.finder-group');
                            parentGroup.querySelectorAll('.finder-option').forEach(opt => {
                                opt.classList.remove('selected');
                            });
                            // Add selected class to clicked option
                            this.classList.add('selected');
                            // Check selection after click
                            checkSelection();
                        });
                    });

                    // Funktion zum Aktualisieren der Serien basierend auf der Produktgruppe
                    function updateSeries() {
                        const selectedProduct = document.querySelector('#step1 .finder-option.selected');
                        if (!selectedProduct) return;

                        const productType = selectedProduct.querySelector('.finder-option-title').textContent;
                        const seriesContainer = document.querySelector('#step2 .finder-options');
                        seriesContainer.innerHTML = ''; // Leere den Container

                        const series = productSeries[productType] || [];
                        series.forEach(item => {
                            const seriesElement = document.createElement('div');
                            seriesElement.className = 'finder-option';
                            seriesElement.innerHTML = `
                                <h4 class="finder-option-title">${item.title}</h4>
                                <p class="finder-option-description">${item.description}</p>
                            `;
                            seriesContainer.appendChild(seriesElement);
                        });

                        // Neue Event-Listener für die neuen Serien-Optionen
                        const newSeriesOptions = seriesContainer.querySelectorAll('.finder-option');
                        newSeriesOptions.forEach(option => {
                            option.addEventListener('click', function() {
                                newSeriesOptions.forEach(opt => opt.classList.remove('selected'));
                                this.classList.add('selected');
                                // Check selection after click
                                checkSelection();
                            });
                        });
                        
                        // Reset button state for new step
                        nextButton.disabled = true;
                    }

                    // Funktion zum Aktualisieren der Modelle basierend auf der Serie
                    function updateModels() {
                        const selectedSeries = document.querySelector('#step2 .finder-option.selected');
                        if (!selectedSeries) return;

                        const seriesType = selectedSeries.querySelector('.finder-option-title').textContent;
                        const modelsContainer = document.querySelector('#step3 .finder-options');
                        modelsContainer.innerHTML = ''; // Leere den Container

                        const models = productModels[seriesType] || [];
                        models.forEach(item => {
                            const modelElement = document.createElement('div');
                            modelElement.className = 'finder-option';
                            modelElement.innerHTML = `
                                <h4 class="finder-option-title">${item.model}</h4>
                                <p class="finder-option-description">${item.description}</p>
                            `;
                            modelsContainer.appendChild(modelElement);
                        });

                        // Neue Event-Listener für die Modell-Optionen
                        const newModelOptions = modelsContainer.querySelectorAll('.finder-option');
                        newModelOptions.forEach(option => {
                            option.addEventListener('click', function() {
                                newModelOptions.forEach(opt => opt.classList.remove('selected'));
                                this.classList.add('selected');
                                // Check selection after click
                                checkSelection();
                            });
                        });
                        
                        // Reset button state for new step
                        nextButton.disabled = true;
                    }

                    nextButton.addEventListener('click', function() {
                        const currentGroup = document.getElementById(`step${currentStep}`);
                        const nextGroup = document.getElementById(`step${currentStep + 1}`);
                        
                        if (nextGroup) {
                            // Aktualisiere Serien beim Übergang zu Schritt 2
                            if (currentStep === 1) {
                                updateSeries();
                            }
                            // Aktualisiere Modelle beim Übergang zu Schritt 3
                            else if (currentStep === 2) {
                                updateModels();
                            }
                            
                            currentGroup.style.display = 'none';
                            nextGroup.style.display = 'block';
                            currentStep++;
                            prevButton.style.display = 'block';
                            
                            if (currentStep === 3) {
                                nextButton.textContent = 'Ersatzteile anzeigen';
                            }
                        }
                    });

                    prevButton.addEventListener('click', function() {
                        const currentGroup = document.getElementById(`step${currentStep}`);
                        const prevGroup = document.getElementById(`step${currentStep - 1}`);
                        
                        if (prevGroup) {
                            currentGroup.style.display = 'none';
                            prevGroup.style.display = 'block';
                            currentStep--;
                            
                            if (currentStep === 1) {
                                prevButton.style.display = 'none';
                            }
                            
                            nextButton.textContent = 'Weiter';
                        }
                    });
                }

                // Initialize Product Gallery
                function initializeProductGallery() {
                    const mainImage = document.querySelector('.gallery-main img');
                    const thumbs = document.querySelectorAll('.gallery-thumb');

                    if (mainImage && thumbs.length > 0) {
                        // Set first thumb as active
                        if (!document.querySelector('.gallery-thumb.active')) {
                            thumbs[0].classList.add('active');
                        }

                        // Thumbnail click handlers
                        thumbs.forEach(thumb => {
                            thumb.addEventListener('click', function() {
                                const imgSrc = this.querySelector('img').src;
                                mainImage.src = imgSrc;
                                
                                thumbs.forEach(t => t.classList.remove('active'));
                                this.classList.add('active');
                            });
                        });
                    }
                }

                // Call gallery initialization
                initializeProductGallery();

                // Initialize Quantity Input
                const quantityInput = document.querySelector('.quantity-value');
                const minusBtn = document.querySelector('.quantity-btn:first-child');
                const plusBtn = document.querySelector('.quantity-btn:last-child');

                if (quantityInput && minusBtn && plusBtn) {
                    // Remove existing event listeners
                    const newMinusBtn = minusBtn.cloneNode(true);
                    const newPlusBtn = plusBtn.cloneNode(true);
                    const newQuantityInput = quantityInput.cloneNode(true);
                    
                    minusBtn.parentNode.replaceChild(newMinusBtn, minusBtn);
                    plusBtn.parentNode.replaceChild(newPlusBtn, plusBtn);
                    quantityInput.parentNode.replaceChild(newQuantityInput, quantityInput);

                    newMinusBtn.addEventListener('click', () => {
                        const currentValue = parseInt(newQuantityInput.value);
                        if (currentValue > 1) {
                            newQuantityInput.value = currentValue - 1;
                        }
                    });

                    newPlusBtn.addEventListener('click', () => {
                        const currentValue = parseInt(newQuantityInput.value);
                        if (currentValue < 99) {
                            newQuantityInput.value = currentValue + 1;
                        }
                    });
                }

                // Initialize Color Selection
                const colorOptions = document.querySelectorAll('.color-option');
                if (colorOptions.length > 0) {
                    colorOptions.forEach(option => {
                        // Remove existing event listeners
                        const newOption = option.cloneNode(true);
                        option.parentNode.replaceChild(newOption, option);
                        
                        newOption.addEventListener('click', function() {
                            colorOptions.forEach(opt => opt.classList.remove('selected'));
                            this.classList.add('selected');
                        });
                    });
                }

                // Initialize Payment Methods Accordion
                const paymentMethods = document.querySelectorAll('.payment-method');
                paymentMethods.forEach(method => {
                    // Remove existing event listeners
                    const newMethod = method.cloneNode(true);
                    method.parentNode.replaceChild(newMethod, method);
                    
                    newMethod.addEventListener('click', function() {
                        if (this.classList.contains('expanded')) {
                            this.classList.remove('expanded');
                            return;
                        }
                        paymentMethods.forEach(m => {
                            m.classList.remove('expanded');
                        });
                        this.classList.add('expanded');
                    });
                });

                // Initialize Country Filter
                const countryItems = document.querySelectorAll('.country-item');
                const shippingTables = document.querySelectorAll('.shipping-table');
                
                countryItems.forEach(item => {
                    // Remove existing event listeners
                    const newItem = item.cloneNode(true);
                    item.parentNode.replaceChild(newItem, item);
                    
                    newItem.addEventListener('click', function() {
                        const countryCode = this.querySelector('.country-code').textContent;
                        
                        // Wenn das geklickte Land bereits aktiv ist, deaktiviere es
                        if (this.classList.contains('active')) {
                            this.classList.remove('active');
                            shippingTables.forEach(table => {
                                table.classList.remove('has-filter');
                                table.classList.add('no-filter');
                            });
                            return;
                        }
                        
                        // Deaktiviere alle anderen Länder
                        countryItems.forEach(c => c.classList.remove('active'));
                        
                        // Aktiviere das geklickte Land
                        this.classList.add('active');
                        
                        // Aktualisiere die Tabellen
                        shippingTables.forEach(table => {
                            table.classList.add('has-filter');
                            table.classList.remove('no-filter');
                            
                            // Zeige nur die Zeilen für das ausgewählte Land
                            const rows = table.querySelectorAll('.shipping-row');
                            rows.forEach(row => {
                                const countries = row.getAttribute('data-countries').split(',');
                                if (countries.includes(countryCode)) {
                                    row.classList.add('visible');
                                } else {
                                    row.classList.remove('visible');
                                }
                            });
                        });
                    });
                });

                // Initialize Info Accordions
                const infoAccordions = document.querySelectorAll('.info-accordion');
                infoAccordions.forEach(accordion => {
                    // Remove existing event listeners
                    const newAccordion = accordion.cloneNode(true);
                    accordion.parentNode.replaceChild(newAccordion, accordion);
                    
                    const header = newAccordion.querySelector('.info-accordion-header');
                    header.addEventListener('click', function() {
                        const isExpanded = newAccordion.classList.contains('expanded');
                        
                        // Toggle current accordion
                        if (isExpanded) {
                            newAccordion.classList.remove('expanded');
                        } else {
                            // Close all other accordions first
                            infoAccordions.forEach(a => {
                                if (a !== newAccordion) {
                                    a.classList.remove('expanded');
                                }
                            });
                            // Then expand the clicked one
                            newAccordion.classList.add('expanded');
                        }
                    });
                });

                // Initialize FAQ Accordions
                const accordionHeaders = document.querySelectorAll('.accordion-header-faq');
                accordionHeaders.forEach(header => {
                    // Remove existing event listeners
                    const newHeader = header.cloneNode(true);
                    header.parentNode.replaceChild(newHeader, header);
                    
                    newHeader.addEventListener('click', () => {
                        const content = newHeader.nextElementSibling;
                        const icon = newHeader.querySelector('.toggle-icon-faq');
                        content.classList.toggle('open');
                        icon.textContent = content.classList.contains('open') ? '-' : '+';
                    });
                });

                // Initialize FAQ Sub-Accordions
                const subHeaders = document.querySelectorAll('.sub-header-faq');
                subHeaders.forEach(subHeader => {
                    // Remove existing event listeners
                    const newSubHeader = subHeader.cloneNode(true);
                    subHeader.parentNode.replaceChild(newSubHeader, subHeader);
                    
                    newSubHeader.addEventListener('click', () => {
                        const subContent = newSubHeader.nextElementSibling;
                        const wasOpen = subContent.classList.contains('open');
                        
                        // Schließe alle anderen offenen Inhalte
                        document.querySelectorAll('.sub-content-faq').forEach(content => {
                            if (content !== subContent) {
                                content.style.maxHeight = '0';
                                content.style.padding = '0';
                                content.style.margin = '0';
                                content.classList.remove('open');
                            }
                        });
                        
                        document.querySelectorAll('.sub-header-faq').forEach(header => {
                            if (header !== newSubHeader) {
                                header.classList.remove('active');
                                header.querySelector('.toggle-icon-faq').textContent = '+';
                            }
                        });
                        
                        if (!wasOpen) {
                            subContent.style.maxHeight = '1000px';
                            subContent.style.padding = '1.5rem';
                            subContent.style.margin = '0.5rem 0';
                            subContent.classList.add('open');
                            newSubHeader.classList.add('active');
                            newSubHeader.querySelector('.toggle-icon-faq').textContent = '-';
                        } else {
                            subContent.style.maxHeight = '0';
                            subContent.style.padding = '0';
                            subContent.style.margin = '0';
                            subContent.classList.remove('open');
                            newSubHeader.classList.remove('active');
                            newSubHeader.querySelector('.toggle-icon-faq').textContent = '+';
                        }
                    });
                });

                // Initialize Filter Toggle
                const filterToggle = document.querySelector('.filter-toggle');
                const filterSidebar = document.querySelector('.filter-sidebar');
                const cancelButton = document.querySelector('.filter-button.cancel');
                const applyButton = document.querySelector('.filter-button.apply');
                const closeButton = document.querySelector('.close-button');
                const filterHeaders = document.querySelectorAll('.filter-header');

                function closeFilterSidebar() {
                    if (filterToggle && filterSidebar) {
                        filterToggle.classList.remove('active');
                        filterSidebar.classList.remove('active');
                    }
                }

                if (filterToggle && filterSidebar) {
                    // Add touch event listeners for mobile
                    filterToggle.addEventListener('touchstart', (e) => {
                        e.preventDefault();
                        filterToggle.classList.toggle('active');
                        filterSidebar.classList.toggle('active');
                    });

                    // Add click event listener for desktop
                    filterToggle.addEventListener('click', () => {
                        filterToggle.classList.toggle('active');
                        filterSidebar.classList.toggle('active');
                    });

                    // Schließe Filter wenn außerhalb geklickt wird
                    document.addEventListener('click', (e) => {
                        if (!filterSidebar.contains(e.target) && !filterToggle.contains(e.target)) {
                            closeFilterSidebar();
                        }
                    });

                    // Add touch event listener for outside clicks on mobile
                    document.addEventListener('touchstart', (e) => {
                        if (!filterSidebar.contains(e.target) && !filterToggle.contains(e.target)) {
                            closeFilterSidebar();
                        }
                    });

                    // Close Button
                    if (closeButton) {
                        closeButton.addEventListener('click', closeFilterSidebar);
                        closeButton.addEventListener('touchstart', (e) => {
                            e.preventDefault();
                            closeFilterSidebar();
                        });
                    }

                    // Cancel Button
                    if (cancelButton) {
                        cancelButton.addEventListener('click', closeFilterSidebar);
                        cancelButton.addEventListener('touchstart', (e) => {
                            e.preventDefault();
                            closeFilterSidebar();
                        });
                    }

                    // Apply Button
                    if (applyButton) {
                        applyButton.addEventListener('click', () => {
                            closeFilterSidebar();
                        });
                        applyButton.addEventListener('touchstart', (e) => {
                            e.preventDefault();
                            closeFilterSidebar();
                        });
                    }
                }

                // Filter Toggle für einzelne Filter-Gruppen
                filterHeaders.forEach(header => {
                    // Add touch event listener for mobile
                    header.addEventListener('touchstart', function(e) {
                        e.preventDefault();
                        const content = this.nextElementSibling;
                        const icon = this.querySelector('i');
                        
                        content.classList.toggle('active');
                        icon.style.transform = content.classList.contains('active') 
                            ? 'rotate(180deg)' 
                            : 'rotate(0)';
                    });

                    // Add click event listener for desktop
                    header.addEventListener('click', function() {
                        const content = this.nextElementSibling;
                        const icon = this.querySelector('i');
                        
                        content.classList.toggle('active');
                        icon.style.transform = content.classList.contains('active') 
                            ? 'rotate(180deg)' 
                            : 'rotate(0)';
                    });
                });

                // Range Slider
                const rangeSlider = document.querySelector('.range-slider input');
                const rangeValues = document.querySelector('.range-values');
                
                if (rangeSlider && rangeValues) {
                    rangeSlider.addEventListener('input', function() {
                        rangeValues.children[0].textContent = this.value + ' cm';
                    });
                }

                // Initialize Mega Menus
                const navItems = document.querySelectorAll('.nav-item');
                
                navItems.forEach(item => {
                    const link = item.querySelector('.nav-link');
                    const megaMenu = item.querySelector('.mega-menu');
                    
                    if (megaMenu) {
                        // Show mega menu on hover
                        item.addEventListener('mouseenter', () => {
                            megaMenu.classList.add('show');
                            link.classList.add('active');
                        });
                        
                        // Hide mega menu on mouse leave
                        item.addEventListener('mouseleave', () => {
                            megaMenu.classList.remove('show');
                            if (!link.classList.contains('active')) {
                                link.classList.remove('active');
                            }
                        });
                        
                        // Handle mobile touch
                        link.addEventListener('click', (e) => {
                            if (window.innerWidth <= 992) {
                                e.preventDefault();
                                e.stopPropagation();
                                megaMenu.classList.toggle('show');
                                link.classList.toggle('active');
                            }
                        });
                    }
                });
                
                // Close all dropdowns when clicking outside
                document.addEventListener('click', (e) => {
                    // Close mega menus
                    if (!e.target.closest('.nav-item')) {
                        document.querySelectorAll('.mega-menu').forEach(menu => {
                            menu.classList.remove('show');
                        });
                        document.querySelectorAll('.nav-link').forEach(link => {
                            if (!link.classList.contains('active')) {
                                link.classList.remove('active');
                            }
                        });
                    }
                    
                    // Close header dropdowns
                    if (!e.target.closest('.header-action')) {
                        closeAllDropdowns();
                    }
                    
                    // Close mobile menu
                    if (!e.target.closest('.mobile-nav-menu') && !e.target.closest('.mobile-nav-toggle')) {
                        document.querySelectorAll('.mobile-nav-menu').forEach(menu => {
                            menu.classList.remove('show');
                        });
                        document.querySelectorAll('.mobile-nav-toggle').forEach(toggle => {
                            toggle.classList.remove('active');
                        });
                    }
                });

                // Initialize Support, Account und Language Dropdowns
                const supportButton = document.querySelector('.header-action .support-selector-button:has(.bi-question-circle)');
                const supportDropdown = supportButton?.closest('.header-action').querySelector('.support-dropdown');
                const accountButton = document.querySelector('.header-action .support-selector-button:has(.bi-person)');
                const accountDropdown = accountButton?.closest('.header-action').querySelector('.account-dropdown');
                const languageButton = document.querySelector('.language-selector-button');
                const languageDropdown = document.querySelector('.language-dropdown');
                const allDropdowns = [supportDropdown, accountDropdown, languageDropdown];
                const allButtons = [supportButton, accountButton, languageButton];

                function closeAllDropdowns(exceptDropdown = null) {
                    allDropdowns.forEach(dropdown => {
                        if (dropdown && dropdown !== exceptDropdown) {
                            dropdown.classList.remove('show');
                        }
                    });
                    allButtons.forEach(button => {
                        if (button) {
                            button.classList.remove('active');
                            button.setAttribute('aria-expanded', 'false');
                        }
                    });
                }

                // Support Dropdown
                if (supportButton && supportDropdown) {
                    supportButton.addEventListener('click', function(e) {
                        e.stopPropagation();
                        const isExpanded = this.getAttribute('aria-expanded') === 'true';
                        
                        closeAllDropdowns(isExpanded ? null : supportDropdown);
                        
                        supportDropdown.classList.toggle('show');
                        this.classList.toggle('active');
                        this.setAttribute('aria-expanded', !isExpanded);
                    });
                }

                // Account Dropdown
                if (accountButton && accountDropdown) {
                    accountButton.addEventListener('click', function(e) {
                        e.stopPropagation();
                        const isExpanded = this.getAttribute('aria-expanded') === 'true';
                        
                        closeAllDropdowns(isExpanded ? null : accountDropdown);
                        
                        accountDropdown.classList.toggle('show');
                        this.classList.toggle('active');
                        this.setAttribute('aria-expanded', !isExpanded);
                    });
                }

                // Language Dropdown
                if (languageButton && languageDropdown) {
                    languageButton.addEventListener('click', function(e) {
                        e.stopPropagation();
                        const isExpanded = this.getAttribute('aria-expanded') === 'true';
                        
                        closeAllDropdowns(isExpanded ? null : languageDropdown);
                        
                        languageDropdown.classList.toggle('show');
                        this.classList.toggle('active');
                        this.setAttribute('aria-expanded', !isExpanded);
                    });
                }

                // Close dropdowns when clicking outside
                document.addEventListener('click', function(e) {
                    if (!e.target.closest('.header-action')) {
                        closeAllDropdowns();
                    }
                });

                // Initialize Mobile Navigation
                const mobileMenuButton = document.querySelector('.mobile-menu-button');
                const sidepanel = document.querySelector('.sidepanel');
                const sidepanelClose = document.querySelector('.sidepanel-close');
                const mobileOverlay = document.querySelector('.mobile-overlay');

                if (mobileMenuButton && sidepanel && sidepanelClose && mobileOverlay) {
                    function openSidepanel() {
                        sidepanel.classList.add('show');
                        mobileOverlay.classList.add('show');
                        document.body.style.overflow = 'hidden';
                    }

                    function closeSidepanel() {
                        sidepanel.classList.remove('show');
                        mobileOverlay.classList.remove('show');
                        document.body.style.overflow = '';
                    }

                    // Remove existing event listeners
                    const newMobileMenuButton = mobileMenuButton.cloneNode(true);
                    mobileMenuButton.parentNode.replaceChild(newMobileMenuButton, mobileMenuButton);

                    // Add click event listener for desktop
                    newMobileMenuButton.addEventListener('click', function(e) {
                        e.stopPropagation();
                        openSidepanel();
                    });

                    // Add touch event listener for mobile
                    newMobileMenuButton.addEventListener('touchstart', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        openSidepanel();
                    });

                    // Close menu when clicking close button
                    sidepanelClose.addEventListener('click', closeSidepanel);
                    sidepanelClose.addEventListener('touchstart', function(e) {
                        e.preventDefault();
                        closeSidepanel();
                    });

                    // Close menu when clicking overlay
                    mobileOverlay.addEventListener('click', closeSidepanel);
                    mobileOverlay.addEventListener('touchstart', function(e) {
                        e.preventDefault();
                        closeSidepanel();
                    });

                    // Close menu when clicking outside
                    document.addEventListener('click', function(e) {
                        if (sidepanel.classList.contains('show') && 
                            !sidepanel.contains(e.target) && 
                            !newMobileMenuButton.contains(e.target)) {
                            closeSidepanel();
                        }
                    });

                    // Close menu when touching outside
                    document.addEventListener('touchstart', function(e) {
                        if (sidepanel.classList.contains('show') && 
                            !sidepanel.contains(e.target) && 
                            !newMobileMenuButton.contains(e.target)) {
                            e.preventDefault();
                            closeSidepanel();
                        }
                    });

                    // Close menu when clicking on a link
                    sidepanel.querySelectorAll('a').forEach(link => {
                        link.addEventListener('click', () => {
                            closeSidepanel();
                        });
                        link.addEventListener('touchstart', (e) => {
                            e.preventDefault();
                            closeSidepanel();
                        });
                    });
                }

                // Initialize Mobile Navigation Categories
                const mobileNavCategories = document.querySelectorAll('.mobile-nav-category-title');
                mobileNavCategories.forEach(category => {
                    category.addEventListener('click', function(e) {
                        e.stopPropagation();
                        const subcategories = this.nextElementSibling;
                        const icon = this.querySelector('.toggle-icon');
                        
                        // Close other categories
                        mobileNavCategories.forEach(otherCategory => {
                            if (otherCategory !== this) {
                                otherCategory.classList.remove('active');
                                const otherSubcategories = otherCategory.nextElementSibling;
                                if (otherSubcategories) {
                                    otherSubcategories.classList.remove('show');
                                }
                            }
                        });
                        
                        // Toggle current category
                        this.classList.toggle('active');
                        if (subcategories) {
                            subcategories.classList.toggle('show');
                        }
                    });
                });
            }

            // Helper function to close all dropdowns
            function closeAllDropdowns() {
                document.querySelectorAll('.dropdown-menu.show').forEach(menu => {
                    menu.classList.remove('show');
                });
            }

            // Load Content Function
            async function loadContent(url) {
                try {
                    loading.classList.add('active');
                    content.classList.add('loading');

                    // Function to extract body content from HTML string
                    function extractBodyContent(htmlString) {
                        const tempDiv = document.createElement('div');
                        tempDiv.innerHTML = htmlString;
                        // Find the first element with class 'geuther-header', 'geuther-newsletter', etc.
                        // or fall back to the body content
                        const specificContent = tempDiv.querySelector('.geuther-header, .geuther-newsletter, .geuther-footer, main, .blog-magazine, .blog-article');
                        return specificContent ? specificContent.outerHTML : tempDiv.innerHTML;
                    }

                    // Load all content
                    const [mainResponse, headerResponse, newsletterResponse, footerResponse] = await Promise.all([
                        fetch(url),
                        fetch('header.html'),
                        fetch('newsletter.html'),
                        fetch('footer.html')
                    ]);

                    if (!mainResponse.ok) throw new Error('Seite konnte nicht geladen werden');

                    const [html, headerHtml, newsletterHtml, footerHtml] = await Promise.all([
                        mainResponse.text(),
                        headerResponse.text(),
                        newsletterResponse.text(),
                        footerResponse.text()
                    ]);

                    // Parse all documents
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(html, 'text/html');
                    const headerDoc = parser.parseFromString(headerHtml, 'text/html');
                    const newsletterDoc = parser.parseFromString(newsletterHtml, 'text/html');
                    const footerDoc = parser.parseFromString(footerHtml, 'text/html');

                    // Clean up old styles and scripts
                    document.querySelectorAll('style[data-source]').forEach(style => style.remove());

                    // Extract main content (excluding header, footer, etc. if present)
                    const mainContent = doc.body.innerHTML;

                    // Update lastLoadedPage
                    const newPage = url.split('/').pop() || 'home.html';
                    lastLoadedPage = newPage;

                    // Combine contents
                    content.innerHTML = 
                        extractBodyContent(headerHtml) +
                        mainContent +
                        extractBodyContent(newsletterHtml) +
                        extractBodyContent(footerHtml);

                    // Update comparison content and image if active
                    if (isComparisonActive) {
                        updateComparisonImage(newPage);
                        comparisonContent.innerHTML = content.innerHTML;
                    }

                    // Extract and append styles from all documents
                    function appendStyles(sourceDoc, source) {
                        const styles = sourceDoc.getElementsByTagName('style');
                        Array.from(styles).forEach(style => {
                            // Prüfe, ob der Style bereits existiert
                            const existingStyle = document.querySelector(`style[data-source="${source}"]`);
                            if (existingStyle) {
                                existingStyle.textContent = style.textContent;
                            } else {
                                const newStyle = document.createElement('style');
                                newStyle.setAttribute('data-source', source);
                                newStyle.textContent = style.textContent;
                                document.head.appendChild(newStyle);
                            }
                        });

                        const links = sourceDoc.getElementsByTagName('link');
                        Array.from(links).forEach(link => {
                            if (link.rel === 'stylesheet') {
                                const existingLink = document.querySelector(`link[href="${link.href}"]`);
                                if (!existingLink) {
                                    const newLink = document.createElement('link');
                                    Array.from(link.attributes).forEach(attr => {
                                        newLink.setAttribute(attr.name, attr.value);
                                    });
                                    document.head.appendChild(newLink);
                                }
                            }
                        });
                    }

                    // Extract and append styles from all documents
                    appendStyles(headerDoc, 'header');
                    appendStyles(doc, url);
                    appendStyles(newsletterDoc, 'newsletter');
                    appendStyles(footerDoc, 'footer');

                    // Execute scripts from all documents
                    executeScripts(headerDoc);
                    executeScripts(doc);
                    executeScripts(newsletterDoc);
                    executeScripts(footerDoc);

                    // Initialize Mega Menus
                    const navItems = document.querySelectorAll('.nav-item');
                    
                    navItems.forEach(item => {
                        const link = item.querySelector('.nav-link');
                        const megaMenu = item.querySelector('.mega-menu');
                        
                        if (megaMenu) {
                            // Show mega menu on hover
                            item.addEventListener('mouseenter', () => {
                                megaMenu.classList.add('show');
                                link.classList.add('active');
                            });
                            
                            // Hide mega menu on mouse leave
                            item.addEventListener('mouseleave', () => {
                                megaMenu.classList.remove('show');
                                if (!link.classList.contains('active')) {
                                    link.classList.remove('active');
                                }
                            });
                            
                            // Handle mobile touch
                            link.addEventListener('click', (e) => {
                                if (window.innerWidth <= 992) {
                                    e.preventDefault();
                                    e.stopPropagation();
                                    megaMenu.classList.toggle('show');
                                    link.classList.toggle('active');
                                }
                            });
                        }
                    });
                    
                    // Close mega menu when clicking outside
                    document.addEventListener('click', (e) => {
                        if (!e.target.closest('.nav-item')) {
                            document.querySelectorAll('.mega-menu').forEach(menu => {
                                menu.classList.remove('show');
                            });
                            document.querySelectorAll('.nav-link').forEach(link => {
                                if (!link.classList.contains('active')) {
                                    link.classList.remove('active');
                                }
                            });
                        }
                    });

                    // Add Bootstrap CSS if not present
                    if (!document.querySelector('link[href*="bootstrap"]')) {
                        const bootstrapCSS = document.createElement('link');
                        bootstrapCSS.rel = 'stylesheet';
                        bootstrapCSS.href = 'https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css';
                        document.head.appendChild(bootstrapCSS);
                    }

                    // Add Bootstrap JS if not present
                    if (!document.querySelector('script[src*="bootstrap"]')) {
                        const bootstrapJS = document.createElement('script');
                        bootstrapJS.src = 'https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js';
                        bootstrapJS.onload = () => {
                            // Initialize all interactive elements after Bootstrap is loaded
                            initializeInteractiveElements();
                        };
                        document.body.appendChild(bootstrapJS);
                    } else {
                        // If Bootstrap is already loaded, initialize immediately
                        initializeInteractiveElements();
                    }

                    // Update page title
                    const titleMatch = html.match(/<title[^>]*>([\s\S]*?)<\/title>/i);
                    if (titleMatch) document.title = titleMatch[1];

                    // Update URL without reload
                    history.pushState({}, '', url);

                    // Initialize Hero Slider after content is loaded with a small delay
                    setTimeout(() => {
                        const slides = document.querySelectorAll('.slide');
                        const dots = document.querySelectorAll('.slider-dot');
                        
                        if (slides.length > 0 && dots.length > 0) {
                            let currentSlide = 0;

                            function showSlide(index) {
                                slides.forEach(slide => {
                                    slide.classList.remove('active', 'previous');
                                    if (slide.classList.contains('active')) {
                                        slide.classList.add('previous');
                                    }
                                });
                                dots.forEach(dot => dot.classList.remove('active'));
                                
                                slides[index].classList.add('active');
                                dots[index].classList.add('active');
                            }

                            function nextSlide() {
                                currentSlide = (currentSlide + 1) % slides.length;
                                showSlide(currentSlide);
                            }

                            // Automatischer Slider
                            const sliderInterval = setInterval(nextSlide, 5000);

                            // Click-Events für Dots
                            dots.forEach((dot, index) => {
                                dot.addEventListener('click', () => {
                                    currentSlide = index;
                                    showSlide(currentSlide);
                                });
                            });

                            // Initialen Slide setzen
                            showSlide(0);
                        }
                    }, 100);

                    // Initialize Sticky Bottom Bar if on product detail page
                    const existingStickyBar = document.querySelector('.sticky-bottom-bar');
                    if (existingStickyBar) {
                        existingStickyBar.remove();
                    }

                    if (document.querySelector('.geuther-product')) {
                        const stickyBar = document.createElement('div');
                        stickyBar.className = 'sticky-bottom-bar';
                        stickyBar.innerHTML = `
                            <div class="color-selection">
                                <label class="color-label">Farbe:</label>
                                <div class="color-options">
                                    <div class="color-option selected" style="background: #ffffff;" title="Weiß"></div>
                                    <div class="color-option" style="background: #2c2c2c;" title="Schwarz"></div>
                                    <div class="color-option" style="background: #d4bc9c;" title="Natur"></div>
                                </div>
                            </div>
                            <div class="add-to-cart-section">
                                <div class="quantity-input">
                                    <button class="quantity-btn" type="button">-</button>
                                    <input type="number" class="quantity-value" value="1" min="1" max="99">
                                    <button class="quantity-btn" type="button">+</button>
                                </div>
                                <button class="add-to-cart-btn">
                                    <i class="bi bi-cart-plus"></i>
                                    In den Warenkorb
                                </button>
                            </div>
                        `;
                        document.body.appendChild(stickyBar);

                        const originalBar = document.querySelector('.add-to-cart-section').parentElement;
                        const observer = new IntersectionObserver((entries) => {
                            entries.forEach(entry => {
                                if (!entry.isIntersecting) {
                                    stickyBar.classList.add('visible');
                                } else {
                                    stickyBar.classList.remove('visible');
                                }
                            });
                        }, { threshold: 1.0 });

                        observer.observe(originalBar);

                        // Sync color selection and quantity between original and sticky bar
                        const syncElements = () => {
                            const originalColorOptions = document.querySelectorAll('.color-option');
                            const stickyColorOptions = stickyBar.querySelectorAll('.color-option');
                            const originalQuantity = document.querySelector('.quantity-value');
                            const stickyQuantity = stickyBar.querySelector('.quantity-value');

                            stickyColorOptions.forEach((option, index) => {
                                option.addEventListener('click', () => {
                                    stickyColorOptions.forEach(opt => opt.classList.remove('selected'));
                                    option.classList.add('selected');
                                    originalColorOptions[index].click();
                                });
                            });

                            originalColorOptions.forEach((option, index) => {
                                option.addEventListener('click', () => {
                                    originalColorOptions.forEach(opt => opt.classList.remove('selected'));
                                    option.classList.add('selected');
                                    stickyColorOptions[index].click();
                                });
                            });

                            originalQuantity.addEventListener('change', () => {
                                stickyQuantity.value = originalQuantity.value;
                            });

                            stickyQuantity.addEventListener('change', () => {
                                originalQuantity.value = stickyQuantity.value;
                            });
                        };

                        syncElements();
                    }

                } catch (error) {
                    console.error('Loading error:', error);
                    showError('Ein Fehler ist aufgetreten. Bitte versuchen Sie es später erneut.');
                } finally {
                    loading.classList.remove('active');
                    content.classList.remove('loading');
                }
            }

            // Show Error Function
            function showError(message) {
                errorMessage.textContent = message;
                errorMessage.classList.add('active');
                setTimeout(() => {
                    errorMessage.classList.remove('active');
                }, 3000);
            }

            // Handle Navigation
            document.addEventListener('click', (e) => {
                const link = e.target.closest('a');
                if (link && link.href && link.href.startsWith(window.location.origin)) {
                    e.preventDefault();
                    loadContent(link.href);
                    navMenu.classList.remove('active');
                }
            });

            // Handle Browser Back/Forward
            window.addEventListener('popstate', () => {
                loadContent(window.location.href);
            });

            // Initial Load
            loadContent('home.html');
        });

        // Countdown Timer für die Sale-Seite
        function updateCountdown() {
            const endDate = new Date('2025-04-22T23:59:59').getTime();
            
            function update() {
                const now = new Date().getTime();
                const distance = endDate - now;

                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                // Prüfen, ob die Elemente existieren (für die sale.html)
                const hoursElement = document.getElementById('hours');
                const minutesElement = document.getElementById('minutes');
                const secondsElement = document.getElementById('seconds');
                const timerElement = document.querySelector('.flash-sale-timer');

                if (hoursElement) hoursElement.textContent = String(hours).padStart(2, '0');
                if (minutesElement) minutesElement.textContent = String(minutes).padStart(2, '0');
                if (secondsElement) secondsElement.textContent = String(seconds).padStart(2, '0');

                if (distance < 0 && timerElement) {
                    clearInterval(timer);
                    timerElement.innerHTML = "Angebot beendet!";
                }
            }

            update();
            const timer = setInterval(update, 1000);
        }

        // Countdown starten, wenn die Seite geladen ist
        document.addEventListener('DOMContentLoaded', updateCountdown);
        
        // Versandinfo Modal im übergeordneten Fenster
        const versandinfoModal = document.getElementById('versandinfo-modal');
        
        // Höre auf Nachrichten vom iframe
        window.addEventListener('message', (event) => {
            if (event.data.action === 'openVersandinfoModal' && versandinfoModal) {
                versandinfoModal.classList.add('active');
                document.body.style.overflow = 'hidden';
            } else if (event.data.action === 'closeVersandinfoModal' && versandinfoModal) {
                versandinfoModal.classList.remove('active');
                document.body.style.overflow = '';
            }
        });
        
        // Schließen-Button für das Modal
        const closeModalBtn = document.querySelector('.modal-close');
        const modalOverlay = document.querySelector('.modal-overlay');
        
        if (closeModalBtn) {
            closeModalBtn.addEventListener('click', () => {
                if (versandinfoModal) {
                    versandinfoModal.classList.remove('active');
                    document.body.style.overflow = '';
                    
                    // Sende Nachricht an alle iframes, dass das Modal geschlossen wurde
                    const iframes = document.querySelectorAll('iframe');
                    iframes.forEach(iframe => {
                        try {
                            iframe.contentWindow.postMessage({ action: 'closeVersandinfoModal' }, '*');
                        } catch (e) {
                            console.error('Fehler beim Senden der Nachricht an iframe:', e);
                        }
                    });
                }
            });
        }
        
        if (modalOverlay) {
        };

        // Produktfinder Funktionalität
        document.addEventListener('DOMContentLoaded', function() {
            // Produktfinder Formular
            const productFinderForm = document.getElementById('productFinderForm');
            if (productFinderForm) {
                productFinderForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    // Sammle die ausgewählten Werte
                    const location = document.querySelector('input[name="location"]:checked')?.value;
                    const mounting = document.querySelector('input[name="mounting"]:checked')?.value;
                    const material = document.querySelector('input[name="material"]:checked')?.value;
                    
                    // Hier können Sie die Logik für die Produktempfehlung implementieren
                    let recommendedProduct = determineRecommendedProduct(location, mounting, material);
                    
                    // Zeige das Ergebnis an
                    displayRecommendation(recommendedProduct);
                });
            }

            // Funktion zur Bestimmung des empfohlenen Produkts
            function determineRecommendedProduct(location, mounting, material) {
                // Beispiel-Logik für Produktempfehlungen
                if (location === 'door' && mounting === 'screw' && material === 'wood') {
                    return {
                        name: 'Türschutzgitter 2732+',
                        description: 'Perfekt für Türöffnungen, mit Schraubbefestigung aus hochwertigem Holz',
                        price: '89,99 €',
                        image: 'path/to/image.jpg',
                        link: '/produkt/tuerschutzgitter-2732'
                    };
                } else if (location === 'stairs' && mounting === 'clamp' && material === 'metal') {
                    return {
                        name: 'Treppenschutzgitter Easylock Plus',
                        description: 'Ideal für Treppen, mit Klemmbefestigung aus stabilem Metall',
                        price: '99,99 €',
                        image: 'path/to/image.jpg',
                        link: '/produkt/treppenschutzgitter-easylock-plus'
                    };
                }
                // Weitere Kombinationen hier...
                
                return {
                    name: 'Easylock Wood Plus',
                    description: 'Universelles Schutzgitter für verschiedene Einsatzbereiche',
                    price: '79,99 €',
                    image: 'path/to/image.jpg',
                    link: '/produkt/easylock-wood-plus'
                };
            }

            // Funktion zum Anzeigen der Empfehlung
            function displayRecommendation(product) {
                const resultContainer = document.getElementById('productFinderResult');
                if (resultContainer) {
                    resultContainer.innerHTML = `
                        <div class="recommended-product">
                            <h3>${product.name}</h3>
                            <p>${product.description}</p>
                            <p class="price">${product.price}</p>
                            <a href="${product.link}" class="product-button">Zum Produkt</a>
                        </div>
                    `;
                    resultContainer.style.display = 'block';
                    resultContainer.scrollIntoView({ behavior: 'smooth' });
                }
            }

            // Radio Button Gruppen Funktionalität
            const radioGroups = document.querySelectorAll('.radio-group');
            radioGroups.forEach(group => {
                const radioButtons = group.querySelectorAll('input[type="radio"]');
                radioButtons.forEach(radio => {
                    radio.addEventListener('change', function() {
                        // Entferne die aktive Klasse von allen Labels in der Gruppe
                        group.querySelectorAll('label').forEach(label => {
                            label.classList.remove('active');
                        });
                        // Füge die aktive Klasse zum ausgewählten Label hinzu
                        if (this.checked) {
                            this.parentElement.classList.add('active');
                        }
                    });
                });
            });
        });
    </script>

    <!-- Versandinfo Modal -->
    <div id="versandinfo-modal" class="modal">
        <div class="modal-overlay"></div>
        <div class="modal-container">
            <button class="modal-close">
                <i class="bi bi-x-lg"></i>
            </button>
            <iframe src="versandinfo.html" frameborder="0"></iframe>
        </div>
    </div>
</body>
</html>